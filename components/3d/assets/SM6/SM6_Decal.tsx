/*
Auto-generated by: https://github.com/pmndrs/gltfjsx
*/

import * as THREE from "three";
import React, { useRef } from "react";
import { TextureLoader } from "three";
import { useLoader } from "@react-three/fiber";
import { useGLTF } from "@react-three/drei";
import { useGarageStore } from "@/store/useGarageStore";

const SM6_Decal = () => {
  const group = useRef<THREE.Group>(null);
  const { selectedParts, selectedColors } = useGarageStore();
  const patternMeta = selectedParts["Pattern"];

  const { nodes, materials } = useGLTF("/api/model-url?name=SM6/SM6_decal.glb") as any;

  const textures = {
    motorsport: useLoader(TextureLoader, "/api/model-url?name=SM6/SM6_decal_stripe.png"),
    offroad: useLoader(TextureLoader, "/api/model-url?name=SM6/SM6_decal_triangle.png"),
    futuristic: useLoader(TextureLoader, "/api/model-url?name=SM6/SM6_decal_hexagon.png"),
  };

  if (!patternMeta?.theme) return null;

  const map = textures[patternMeta.theme.toLowerCase() as keyof typeof textures];
  if (!map) return null;

  return (
    <group ref={group} dispose={null}>
      <mesh geometry={nodes.SM6_Decal.geometry} material={materials.Decal}>
        <meshStandardMaterial
          attach="material"
          map={map}
          transparent
          metalness={0.4}
          roughness={0.15}
          color={selectedColors.Pattern}
        />
      </mesh>
    </group>
  );
};

export default SM6_Decal;
